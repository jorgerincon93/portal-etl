<div class="ruta">{{titulo|raw}}</div>
{{crear|raw}}
<table align="center" width="100%" cellpadding="0" cellspacing="0" class="tablaGeneral" id="tablaOrdenCompra">    
    <div id="productos"></div>
</table>

<script>


$(function() {
 
    $("#productos").bs_grid({
 
        ajaxFetchDataURL: "index_blank.php?component=OfertaEconomica&method=ajaxListaOfertaEconomica&idMenu="+{{idMenu}},
        row_primary_key: "id", 
        columns: [
            {field: "avance", header: "Avance"},
            {field: "estado", header: "Estado", visible: "no"},
            {field: "fechaCreacion", header: "Fecha Creacion", visible: "no"},
            {field: "fechaModificacion", header: "Fecha Modificacion", visible: "no"},
            {field: "cliente", header: "Cliente"},
            {field: "numeroContrato", header: "Numero Contrato"},
            {field: "numeroContratoInterno", header: "Contrato Interno"},
            {field: "fechaInicio", header: "Fecha Inicio", visible: "no"},
            {field: "fechaFin", header: "Fecha Fin", visible: "no"},
            {field: "prorroga", header: "Prorroga", visible: "no"},
            {field: "valorContrato", header: "Valor Contrato"},
            {field: "idServicio", header: "Servicio"},
            {field: "cantidadOperarios", header: "Cantidad Operarios", visible: "no"},
            {field: "actaLiquidacion", header: "Acta Liquidacion"},
            {field: "certificacion", header: "Certificacion", visible: "no"},
            {field: "acciones", header: "Acciones", "sortable": "no"}
            
        ],
        sorting: [
            {sortingName: "Estado", field: "estado", order: "ascending"},
            {sortingName: "Fecha Creacion", field: "fechaCreacion", order: "none"},
            {sortingName: "Fecha Modificacion", field: "fechaModificacion", order: "none"},
            {sortingName: "Cliente", field: "cliente", order: "none"},
            {sortingName: "Numero Contrato", field: "numeroContrato", order: "none"},
            {sortingName: "Contrato Interno", field: "numeroContratoInterno", order: "none"},
            {sortingName: "Fecha Inicio", field: "fechaInicio", order: "none"},
            {sortingName: "Fecha Fin", field: "fechaFin", order: "none"},
            {sortingName: "Prorroga", field: "prorroga", order: "none"},
            {sortingName: "Valor Contrato", field: "valorContrato", order: "none"},
            {sortingName: "Servicio", field: "idServicio", order: "none"},
            {sortingName: "Cantidad Operarios", field: "cantidadOperarios", order: "none"},
            {sortingName: "Acta Liquidacion", field: "actaLiquidacion", order: "none"},
            {sortingName: "Certificacion", field: "certificacion", order: "none"}
        ],
        filterOptions: {
            filters: [
                {
                    filterName: "avance", "filterType": "number", field: "avance", filterLabel: "Avance",
                    filter_interface: [
                        {
                            filter_element: "input",
                            filter_element_attributes: {"type": "text"}
                        }
                    ]
                },
                {
                    filterName: "Estado", "filterType": "text", field: "estado", filterLabel: "Nombre",
                    filter_interface: [
                        {
                            filter_element: "input",
                            filter_element_attributes: {"type": "text"}
                        }
                    ]
                },
                {
                    filterName: "Fecha Creacion", "filterType": "text", field: "fechaCreacion", filterLabel: "Fecha Creacion",
                    filter_interface: [
                        {
                            filter_element: "input",
                            filter_element_attributes: {"type": "text"}
                        }
                    ]
                },
                {
                    filterName: "Fecha Modificacion", "filterType": "text", field: "fechaModificacion", filterLabel: "Fecha Modificacion",
                    filter_interface: [
                        {
                            filter_element: "input",
                           filter_element_attributes: {"type": "text"}
                       }
                    ]
                }
            ]
        }
    });
 
});	

                
$(document).ready(function() {
	$(".various").fancybox({
		maxWidth	: 400,
		maxHeight	: 800,
		fitToView	: true,
		width		: '70%',
		height		: '70%',
		autoSize	: true,
		closeClick	: false,
		openEffect	: 'none',
		closeEffect	: 'none'
	});
});

function verOfertaEconomica(idUsuario){
	$.ajax({
		url:'index_blank.php?component=OfertaEconomica&method=verOfertaEconomica',
		data:'id='+idUsuario,
		success: function(msm){
			$('#fancybox-inner').html(msm);
        }
	});
}

function agregarOfertaEconomica(id_usuario){
	$.ajax({
		url:'index_blank.php?component=OfertaEconomica&method=agregarOfertaEconomica&idMenu='+{{idMenu}},
		type: "POST",
		success: function(msm){
			$('#componenteCentral').html(msm);
        }
	});
}

function crearEvento(){        
        
        $.ajax({
            url:'index_blank.php?component=OfertaEconomica&method=crearEvento',
            type: "POST",
            data:$('#envioDatos').serialize(),
            success: function (msm){
                $('#fancybox-inner').html(msm);
            }
        
       
        });
}
  
function editarOfertaEconomica(id){

	$.ajax({
		url:'index_blank.php?component=OfertaEconomica&method=editarOfertaEconomica',
		type: "POST",
		data:'id='+id+'&idMenu='+{{idMenu}},
		success: function(msm){
			$('#componenteCentral').html(msm);
        }
	});
}

function eliminarOfertaEconomica(id, nombre){
	//if(confirm('Realmente desea eliminar la Oferta Economica '+nombre+' ?')){
		$.ajax({
		  type: "POST",
		  url: 'index_blank.php?component=OfertaEconomica&method=eliminarOfertaEconomica&id='+id+'&idMenu='+{{idMenu}},
		  success: function(msm){
                      alert('Oferta Economica ' +nombre+ ' Eliminado');
		   $('#componenteCentral').html(msm);
		  }
		});
	//}
}


var opt = {
       colorRange:true,
       colorRangeLimits: {
        optimal: '91-100-green',
        newRangeOne: '61-90-#4aa64f',
        newRangeTwo: '41-60',
        newRangeThree: '21-40-rgb(241,144,40)',
        critical: '0-20'
       },       
       animTime:1000,
       forceAnim:true,
       milestones: {
        1: {
         mlPos: 10,
         mlId: false,
         mlClass: 'bi-custom',
         mlDim: '100%',         

         mlHoverRange: 15,
         mlLineWidth: 1
        },
        2: {
         mlPos: 50,
         mlId: false,
         mlClass: 'bi-custom',
         mlDim: '100%',         

         mlHoverRange: 15,
         mlLineWidth: 1
        },
        3: {
         mlPos: 90,
         mlId: false,
         mlClass: 'bi-custom',
         mlDim: '100%',         

         mlHoverRange: 15,
         mlLineWidth: 1
        }
    }
   };

</script>